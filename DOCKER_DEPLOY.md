# ğŸ³ Docker ä¸€é”®éƒ¨ç½²æ•™ç¨‹

> æœ¬æ•™ç¨‹å¸®åŠ©ä½ å°†çº¸é¹¤å‘å¡ç³»ç»Ÿéƒ¨ç½²åˆ° Linux æœåŠ¡å™¨ä¸Šï¼Œå³ä½¿ä½ æ˜¯æ–°æ‰‹ä¹Ÿèƒ½è½»æ¾å®Œæˆï¼

---

## ğŸ“‹ å‰ææ¡ä»¶

ä½ éœ€è¦ä¸€å° Linux æœåŠ¡å™¨ï¼ˆæ¨è Ubuntu 20.04+ï¼‰ï¼Œå¹¶ä¸”èƒ½é€šè¿‡ SSH è¿æ¥åˆ°å®ƒã€‚

---

## ğŸš€ ä¸€é”®éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå®‰è£… Dockerï¼ˆå¦‚æœè¿˜æ²¡è£…ï¼‰

å¤åˆ¶ç²˜è´´ä¸‹é¢çš„å‘½ä»¤ï¼Œä¸€è¡Œä¸€è¡Œæ‰§è¡Œï¼š

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update

# å®‰è£… Docker
curl -fsSL https://get.docker.com | sudo sh

# å®‰è£… Docker Compose
sudo apt install docker-compose -y

# è®©å½“å‰ç”¨æˆ·å¯ä»¥ä½¿ç”¨ dockerï¼ˆæ‰§è¡Œåéœ€è¦é‡æ–°ç™»å½•ï¼‰
sudo usermod -aG docker $USER
```

> âš ï¸ æ‰§è¡Œå®Œæœ€åä¸€æ¡å‘½ä»¤åï¼Œ**æ–­å¼€ SSH é‡æ–°è¿æ¥**ï¼Œå¦åˆ™ docker å‘½ä»¤ä¼šæŠ¥æƒé™é”™è¯¯ã€‚

---

### ç¬¬äºŒæ­¥ï¼šä» GitHub æ‹‰å–ä»£ç 

```bash
# å®‰è£… gitï¼ˆå¦‚æœæ²¡æœ‰ï¼‰
sudo apt install git -y

# å…‹éš†ä½ çš„ä»“åº“ï¼ˆæ›¿æ¢æˆä½ çš„ä»“åº“åœ°å€ï¼‰
git clone https://github.com/ä½ çš„ç”¨æˆ·å/zhihe_test.git

# è¿›å…¥é¡¹ç›®ç›®å½•
cd zhihe_test
```

> ğŸ’¡ ä½ çš„ä»“åº“åœ°å€å¯ä»¥åœ¨ GitHub é¡µé¢ç‚¹å‡»ç»¿è‰²çš„ "Code" æŒ‰é’®æŸ¥çœ‹

---

### ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹é…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ä¿®æ”¹ç®¡ç†å‘˜å¯†ç ï¼š
```bash
nano config.py
# ä¿®æ”¹ ADMIN_PASSWORD çš„å€¼ï¼ŒæŒ‰ Ctrl+X ä¿å­˜é€€å‡º
```

---

### ç¬¬å››æ­¥ï¼šå¯åŠ¨æœåŠ¡

```bash
# æ„å»ºå¹¶å¯åŠ¨ï¼ˆåå°è¿è¡Œï¼‰
docker-compose up -d --build
```

ç­‰å¾… 1-2 åˆ†é’Ÿï¼Œçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºè¯´æ˜æˆåŠŸäº†ï¼š

```
Creating card_system ... done
```

---

### ç¬¬äº”æ­¥ï¼šéªŒè¯æ˜¯å¦æˆåŠŸ

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs
```

å¦‚æœçœ‹åˆ° `Application startup complete`ï¼Œæ­å–œä½ éƒ¨ç½²æˆåŠŸï¼ğŸ‰

---

## ğŸŒ è®¿é—®ä½ çš„ç³»ç»Ÿ

æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š

```
http://ä½ çš„æœåŠ¡å™¨IP:8000
```

ç®¡ç†åå°ï¼š
```
http://ä½ çš„æœåŠ¡å™¨IP:8000/admin
```

é»˜è®¤ç®¡ç†å‘˜å¯†ç åœ¨ `config.py` æ–‡ä»¶ä¸­ï¼Œé»˜è®¤æ˜¯ `admin1234`

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

| å‘½ä»¤ | ä½œç”¨ |
|------|------|
| `docker-compose up -d` | å¯åŠ¨æœåŠ¡ï¼ˆåå°ï¼‰ |
| `docker-compose down` | åœæ­¢æœåŠ¡ |
| `docker-compose restart` | é‡å¯æœåŠ¡ |
| `docker-compose logs -f` | æŸ¥çœ‹å®æ—¶æ—¥å¿— |
| `docker-compose up -d --build` | é‡æ–°æ„å»ºå¹¶å¯åŠ¨ |

---

## â“ å¸¸è§é—®é¢˜

### Q: ç«¯å£ 8000 è®¿é—®ä¸äº†ï¼Ÿ

1. æ£€æŸ¥æœåŠ¡å™¨é˜²ç«å¢™æ˜¯å¦å¼€æ”¾äº† 8000 ç«¯å£ï¼š
   ```bash
   sudo ufw allow 8000
   ```

2. å¦‚æœæ˜¯äº‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ï¼‰ï¼Œè¿˜éœ€è¦åœ¨**å®‰å…¨ç»„**ä¸­æ”¾è¡Œ 8000 ç«¯å£ã€‚

### Q: å¦‚ä½•ä¿®æ”¹ç®¡ç†å‘˜å¯†ç ï¼Ÿ

ç¼–è¾‘ `config.py` æ–‡ä»¶ï¼Œä¿®æ”¹ `ADMIN_PASSWORD`ï¼Œç„¶åé‡å¯ï¼š
```bash
docker-compose restart
```

### Q: æ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ

ä¸ä¼šï¼æ•°æ®åº“æ–‡ä»¶ `database.db` é€šè¿‡ volume æ˜ å°„åˆ°äº†æœ¬åœ°ï¼Œå³ä½¿åˆ é™¤å®¹å™¨æ•°æ®ä¹Ÿä¼šä¿ç•™ã€‚

### Q: å¦‚ä½•æ›´æ–°ä»£ç ï¼Ÿ

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd zhihe_test

# ä» GitHub æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose down
docker-compose up -d --build
```

---

## ğŸ¯ ä¸€é”®è„šæœ¬ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³æ›´ç®€å•ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼š

```bash
# åˆ›å»ºè„šæœ¬
cat > deploy.sh << 'EOF'
#!/bin/bash
echo "ğŸ³ æ­£åœ¨éƒ¨ç½²çº¸é¹¤å‘å¡ç³»ç»Ÿ..."
docker-compose down 2>/dev/null
docker-compose up -d --build
echo "âœ… éƒ¨ç½²å®Œæˆï¼è®¿é—® http://$(hostname -I | awk '{print $1}'):8000"
EOF

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x deploy.sh

# è¿è¡Œ
./deploy.sh
```

---

**ç¥ä½ éƒ¨ç½²é¡ºåˆ©ï¼å¦‚æœ‰é—®é¢˜è¯·è”ç³»ä½œè€… â¤ï¸**
